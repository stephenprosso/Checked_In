<script>
  
  document.addEventListener('DOMContentLoaded', function() {
      //var selectBoxes = document.querySelectorAll('select');
     // M.FormSelect.init(selectBoxes);  
    //The google script ill call get table data passing data. on success it will call the generateTable passing the data from data array.
   google.script.run.withSuccessHandler(generateEventTable).getEventTableData();
   
    }); 
    
 document.getElementById("table-body").addEventListener("click", function(e){
 
   if(e.target.classList.contains("classViewList")){
      var recordID = e.target.dataset.recordId;
      console.log(recordID);
      
      goToListDetails(recordID);
   }     
  
 }); //all event handlers inside the table

function goToListDetails(id){





}

function generateEventTable(dataArray) {
    // THE BELOW CODE is used to clear out the div to refresh table without refreshign the page. need to call the googe script run again at bottom
    //  $('#tbody').innerHtml = "";
    //  $('#table-body').empty();
      var tbody = document.getElementById("table-body");
       
         console.log(tbody);
        dataArray.forEach(function(r) {
    
    var row = document.createElement("tr");
    var col1= document.createElement("td");
    col1.textContent = r[0];
    var col2= document.createElement("td");
    col2.textContent = r[1];
    var col3= document.createElement("td");
    col3.textContent = r[2];
    var col4= document.createElement("td");
    col4.textContent = r[3];
    var col5= document.createElement("td");
    var viewListAnchor = document.createElement("a");
    viewListAnchor.text = "View List";
    viewListAnchor.classList.add("classViewList");
    viewListAnchor.dataset.recordId = r[0];
    viewListAnchor.setAttribute
    viewListAnchor.setAttribute('href', "https://script.google.com/a/mylifeeveryday.com/macros/s/AKfycbxZSBXq4P1RTQNCujQhV-qmKTllqJZ_9zTUe5uOgPy6/dev?v=listDetail&event=" + r[0]);
    viewListAnchor.innerText = "View List";
    console.log(viewListAnchor.href);
    col5.appendChild(viewListAnchor);  
    row.appendChild(col1);
    row.appendChild(col2);
    row.appendChild(col3);
    row.appendChild(col4);
    row.appendChild(col5);
    tbody.appendChild(row);
    });
    // need to call Google script to refresh grid 
   //google.script.run.withSuccessHandler(generateEventTable).getEventTableData();
 }
    
</script>