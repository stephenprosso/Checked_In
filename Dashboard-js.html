<script>
  
  document.addEventListener('DOMContentLoaded', function() {
      //var selectBoxes = document.querySelectorAll('select');
     // M.FormSelect.init(selectBoxes);  
    //The google script ill call get table data passing data. on success it will call the generateTable passing the data from data array.
   //google.script.run.withSuccessHandler(generateEventTable).getEventTableData();
   google.script.run.withSuccessHandler(generateEventCard).getEventTableData();
   
    }); 
      
    //I added this code on 5/20/20 - code will retrive the record ID of the event
    //document.getElementById("table-body").addEventListener("click", function(e){
    //if(e.target.classList.contains("classViewList")){
    //  var recordID = e.target.dataset.recordId;
    //  console.log(recordID);     
    //  goToListDetails(recordID);
    // }      
    // }); //all event handlers inside the table

function generateEventTable(dataArray) {
    // THE BELOW CODE is used to clear out the div to refresh table without refreshign the page. need to call the googe script run again at bottom
    //  $('#tbody').innerHtml = "";
    //  $('#table-body').empty();
      var tbody = document.getElementById("table-body");
       
         dataArray.forEach(function(r) {
    
              var row = document.createElement("tr");
              var col1= document.createElement("td");
              col1.textContent = r[0];
              var col2= document.createElement("td");
              col2.textContent = r[1];
              var col3= document.createElement("td");
              col3.textContent = r[2];
              var col4= document.createElement("td");
              col4.textContent = r[3];
              var col5= document.createElement("td");
              var viewListAnchor = document.createElement("a");
              viewListAnchor.text = "View List";
              viewListAnchor.classList.add("classViewList");
              viewListAnchor.classList.add("btn-dark");
              viewListAnchor.dataset.recordId = r[0];
              viewListAnchor.setAttribute('href', "https://script.google.com/a/mylifeeveryday.com/macros/s/AKfycbxZSBXq4P1RTQNCujQhV-qmKTllqJZ_9zTUe5uOgPy6/dev?v=listDetail&event=" + r[0]);
              viewListAnchor.innerText = "View List";
              viewListAnchor.setAttribute("type", "button");
              console.log(viewListAnchor.href);
              col5.appendChild(viewListAnchor);  
              row.appendChild(col1);
              row.appendChild(col2);
              row.appendChild(col3);
              row.appendChild(col4);
              row.appendChild(col5);
              tbody.appendChild(row);
    });
    // need to call Google script to refresh grid 
   //google.script.run.withSuccessHandler(generateEventTable).getEventTableData();
 }
 

 function generateEventCard(dataArray) {
 console.log(dataArray);

      //var cbody = document.getElementById("card-holder");
       
         dataArray.forEach(function(r) {
              var cardiv = document.createElement("div");
              cardiv.classList.add("card");
    
              var card = document.createElement("div");
              card.classList.add("card-body");
              
              var eventID = document.createElement("p");
              eventID.textContent = r[0];
              var venue = document.createElement("H3");
              venue.textContent = r[1];
              var eventName=  document.createElement("H4");
              eventName.textContent = r[2];
              var date = document.createElement("p");
              date.textContent = r[3];
              var button= document.createElement("button");
              button.text = "View List";
              button.classList.add("classViewList");
              button.classList.add("btn-dark");
              button.dataset.recordId = r[0];
              //button.setAttribute('href', "https://script.google.com/a/mylifeeveryday.com/macros/s/AKfycbxZSBXq4P1RTQNCujQhV-qmKTllqJZ_9zTUe5uOgPy6/dev?v=listDetail&event=" + r[0]);
              button.innerText = "View List";
              button.setAttribute("type", "button");
              //console.log(button.href);
              card.appendChild(eventID);
              card.appendChild(venue);
              card.appendChild(eventName);
              card.appendChild(date);
              card.appendChild(button);
              cardiv.appendChild(card);
              
              console.log(cardiv);
              document.getElementById("card-holder").appendChild(cardiv);
    });
    // need to call Google script to refresh grid 
   //google.script.run.withSuccessHandler(generateEventTable).getEventTableData();
 } 
    
</script>